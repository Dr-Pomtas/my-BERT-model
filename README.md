# 動物病院口コミ分析システム

## 概要

本システムは、動物病院の口コミデータを分析し、複数のBERTモデルによる感情分析の性能を比較するための研究支援アプリケーションです。

## 機能

### 1. データアップロード
- CSVファイルのアップロード機能
- データの基本統計量表示（総口コミ数、病院数、平均星評価、星評価分布）

### 2. 感情分析とモデル比較
以下の3つの日本語BERTモデルを使用した感情分析を実行します：
- `koheiduck/bert-japanese-finetuned-sentiment`
- `llm-book/bert-base-japanese-v2-finetuned-sentiment` 
- `Mizuiro-inc/bert-base-japanese-finetuned-sentiment-analysis`

### 3. 結果の可視化
- モデル性能比較（相関係数、平均絶対誤差）
- 散布図による相関関係の可視化
- 結果のCSVエクスポート機能

## データ形式

入力CSVファイルは以下の列を含む必要があります：

- `hospital_id`: 動物病院ID
- `review_text`: 口コミテキスト  
- `star_rating`: 星評価（1-5の整数）

## スコア計算

### 口コミスコア
各モデルで、口コミごとにポジティブ確率 P(pos) とネガティブ確率 P(neg) を計算し、以下の式でスコア化：

```
口コミスコア = (P(pos) × 2) - (P(neg) × 2)
```

### 星評価スコア
星評価を以下の式でスコア化：

```
星評価スコア = 星評価 - 3
```

両スコアとも -2.0 から +2.0 の範囲に正規化されます。

## セットアップ

### 必要なパッケージ

```bash
pip install -r requirements.txt
```

### 実行方法

```bash
python app.py
```

アプリケーションは http://localhost:5000 でアクセスできます。

## サンプルデータ

以下のサンプルデータファイルが利用可能です：

- `sample_data.csv` - 基本サンプルデータ（46口コミ、4病院）
- `動物病院口コミサンプル.csv` - 充実した口コミサンプル（46口コミ、4病院）

### データの特徴
- **H001**: 高評価病院（全て5星、8口コミ）- 優秀なサービス
- **H002**: 中高評価病院（5-3星、16口コミ）- バランス型
- **H003**: 中低評価病院（3-2星、12口コミ）- 改善必要
- **H004**: 低評価病院（全て1星、10口コミ）- 問題あり

実際の動物病院口コミを模した、リアルで詳細な内容になっています。

## 技術仕様

- **フレームワーク**: Flask
- **フロントエンド**: Bootstrap 5, Chart.js, Plotly.js
- **機械学習**: Transformers, PyTorch
- **データ処理**: Pandas, NumPy
- **可視化**: Plotly, Matplotlib, Seaborn

## 研究目的

本システムは動物病院の経営意識とオンライン評価の関連性を解明するための研究の第一段階（最適な感情分析モデルの選定）を支援します。

## ライセンス

このプロジェクトは研究目的で開発されています。